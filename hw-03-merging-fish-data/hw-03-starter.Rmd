---
title: "HW 03 - Great Lakes Fish Datasets"
author: "Daytonna Anderson"
date: "October 8, 2025"
output: html_document
---

## Load packages and data

```{r load-packages, message = FALSE}
library(tidyverse)
```

```{r load-data, message = FALSE}
catch_data <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-06-08/fishing.csv')

fish_stock <- read_csv("data/great-lakes-fish-stock.csv")
```

## Exercises

### Exercise 1

```{r catch-data-subset}
catch_data <- catch_data %>%
  select(year, lake, species, region, values)
```

```{r fish-stock-subset}
fish_stock <- fish_stock %>%
  select(YEAR, MONTH, LAKE, STATE_PROV, SPECIES, WEIGHT)
```

### Exercise 2

```{r new-glimpse}

glimpse(fish_stock)

glimpse(catch_data)
```

### Exercise 3

```{r simple-fish}
fish_stock <- fish_stock %>% 
  filter(STATE_PROV %in% c("MI", "WI", "IL", "IN"),
         SPECIES == "CHS",
         LAKE == "MI")
```

```{r simple-catch}
catch_data <- catch_data %>% 
  filter(region == "U.S. Total",
         species == "Chinook Salmon",
         lake == "Michigan")
```

### Exercise 4

```{r data-frame}
nrow(fish_stock)
nrow(catch_data)

min(fish_stock$YEAR)
max (fish_stock$YEAR)

min(catch_data$year)
max(catch_data$year)
```

There are less observations within the specific data frame that we set for one data set over the other.

### Exercise 5

```{r}
fish_stock_yearly <- fish_stock %>% 
  group_by(YEAR) %>% 
  summarize(STOCK_WEIGHT_YR = sum(WEIGHT, na.rm = T))
```


### Code chunks provided

```{r finalize-fish-stock, eval = TRUE}
fish_stock_yearly <- fish_stock_yearly %>% 
  rename(year = YEAR) %>% 
  mutate(stock_weight_yr_lbs = as.integer(STOCK_WEIGHT_YR * 0.454 / 1000)) %>% 
  select(year, stock_weight_yr_lbs)
```

```{r finalize-catch-data, eval = TRUE}
catch_data <- catch_data %>% 
  rename(values = catch_weight_yr_lbs)
```

### Exercise 6

```{r inner-catch}
catch_data %>% 
  inner_join(fish_stock_yearly)
```
It combined the two datasets based on similar values, which are year, weight, lake, species, region, and values.

```{r inner-fish}
fish_stock_yearly %>% 
  inner_join(catch_data)
```
It combined the two datasets based on similar values, which are year, weight, lake, species, region, and values. 

```{r full-catch}
catch_data %>% 
  full_join(fish_stock_yearly)
```
This function combines both tables with all variables. When one data set doesn't contain that variable, NA is used for that observation.

```{r full-fish}
fish_stock_yearly %>% 
  full_join(catch_data)
```
This function combines both tables with all variables. When one data set doesn't contain that variable, NA is used for that observation.

```{r anti-catch}
catch_data %>% 
  anti_join(fish_stock_yearly)
```
It keeps the rows that have mismatched data sets to show missing data between the two tables. In this case, there isn't any so no observations are shown. 


```{r anti-fish }
fish_stock_yearly %>% 
  anti_join(catch_data)
```
It keeps the rows that have mismatched data sets to show missing data between the two tables. In this case it's year and weight. 

### Exercise 7

```{r left-catch}
catch_data %>% 
  left_join(fish_stock_yearly) %>% 
  pivot_longer(names_to = "activity",
               values_to = "weight",
               cols = 5:6)
```


### Exercise 8

```{r join-visualization}
catch_data %>% 
  left_join(fish_stock_yearly) %>% 
  pivot_longer(names_to = "activity",
               values_to = "weight",
               cols = 5:6) %>%
ggplot(aes(x = year, y = weight, color = activity)) +
  geom_line() +
  theme_bw()
```
The trends spiked in 1995 and then have since decreased, gradually.
